"use strict";(self.webpackChunkecommerce_dashboard=self.webpackChunkecommerce_dashboard||[]).push([[59],{3059:(gt,q,i)=>{i.r(q),i.d(q,{CouponsModule:()=>m});var p=i(6895),c=i(8729),t=i(4650);class d{}d.\u0275fac=function(n){return new(n||d)},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-coupons"]],decls:1,vars:0,template:function(n,o){1&n&&t._UZ(0,"router-outlet")},dependencies:[c.lC]});var r=i(671),v=i(9625),A=i(3238),g=i(9549),U=i(7392),b=i(1572),y=i(4385),O=i(6308),N=i(266),a=i(4006);function D(e,n){if(1&e&&(t.TgZ(0,"mat-option",28),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function P(e,n){1&e&&(t.TgZ(0,"th",29)(1,"span"),t._uU(2,"Name"),t.qZA()())}function L(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.couponName)}}function Q(e,n){1&e&&(t.TgZ(0,"th",31)(1,"span"),t._uU(2,"Description"),t.qZA()())}function Y(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.description)}}function M(e,n){1&e&&(t.TgZ(0,"th",31)(1,"span"),t._uU(2,"%"),t.qZA()())}function F(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.discountPercentage)}}function I(e,n){1&e&&(t.TgZ(0,"th",31)(1,"span"),t._uU(2,"remaining"),t.qZA()())}function J(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(null==o?null:o.remaining)}}function k(e,n){1&e&&(t.TgZ(0,"th",31)(1,"span"),t._uU(2,"orders"),t.qZA()())}function w(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.totalOrders)}}function S(e,n){1&e&&(t.TgZ(0,"th",31)(1,"span"),t._uU(2,"sales"),t.qZA()())}function E(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.totalSales)}}function j(e,n){1&e&&(t.TgZ(0,"th",31)(1,"span"),t._uU(2,"commission"),t.qZA()())}function B(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.totalCommissions)}}function $(e,n){1&e&&(t.TgZ(0,"th",31)(1,"span"),t._uU(2,"ending"),t.qZA()())}function z(e,n){if(1&e&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.Oqu(o.validDateTill)}}function H(e,n){1&e&&(t.TgZ(0,"th",32)(1,"span"),t._uU(2,"State"),t.qZA()())}function X(e,n){1&e&&(t.TgZ(0,"td",30)(1,"div",33)(2,"mat-icon",34),t._uU(3,"edit"),t.qZA(),t.TgZ(4,"mat-icon",35),t._uU(5,"delete"),t.qZA(),t.TgZ(6,"mat-icon",36),t._uU(7,"visibility"),t.qZA()()())}function R(e,n){1&e&&t._UZ(0,"tr",37)}function V(e,n){1&e&&t._UZ(0,"tr",38)}function G(e,n){1&e&&(t.TgZ(0,"div",39),t._UZ(1,"mat-spinner",40),t.qZA()),2&e&&(t.xp6(1),t.Q6J("diameter",50))}class f{constructor(n){this.api=n,this.dataSource=new r.by([]),this.columnsToDisplay=["name","coupon","percentage","remaining","orders","sales","commission","ending","action"],this.types=["Affiliate","In Store"]}ngOnInit(){this.getCouponsList()}getCouponsList(){this.api.apiGetCall("Coupon/getCoupon").subscribe(n=>{this.dataSource.data=n.data})}applyFilter(n){this.dataSource.filter=n.trim().toLowerCase()}applyTypeFilter(){}}f.\u0275fac=function(n){return new(n||f)(t.Y36(v.s))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-coupons-list"]],decls:48,vars:9,consts:[[1,"container"],[1,"card"],[1,"row",2,"display","flex","flex-direction","row","align-items","center"],[1,"section-b","col-md-4"],["type","text","name","Search","placeholder","Search...",1,"input","m-3",3,"keyup"],[1,"col-md-5",2,"display","flex","justify-content","flex-start"],["appearance","outline"],["multiple","",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"add-coupon","col-md-3"],["routerLink","/coupon/add"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["class","first","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","coupon"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","percentage"],["matColumnDef","remaining"],["matColumnDef","orders"],["matColumnDef","sales"],["matColumnDef","commission"],["matColumnDef","ending"],["matColumnDef","action"],["class","last","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],[3,"value"],["mat-header-cell","",1,"first"],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","",1,"last"],[1,"displayicon"],["matTooltip","Edit",2,"font-size","18px","cursor","pointer"],["matTooltip","Delete",2,"font-size","18px","cursor","pointer"],["matTooltip","View",2,"font-size","18px","cursor","pointer"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],[3,"diameter"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),t.NdJ("keyup",function(u){return o.applyFilter(u.target.value)}),t.qZA()(),t.TgZ(5,"div",5)(6,"form")(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Type"),t.qZA(),t.TgZ(10,"mat-select",7),t.NdJ("valueChange",function(u){return o.selectedValue=u})("selectionChange",function(){return o.applyTypeFilter()}),t.YNc(11,D,2,2,"mat-option",8),t.qZA()()()(),t.TgZ(12,"div",9)(13,"a",10),t._uU(14),t.ALo(15,"uppercase"),t.qZA()()()(),t.TgZ(16,"div",1)(17,"table",11),t.ynx(18,12),t.YNc(19,P,3,0,"th",13),t.YNc(20,L,2,1,"td",14),t.BQk(),t.ynx(21,15),t.YNc(22,Q,3,0,"th",16),t.YNc(23,Y,2,1,"td",14),t.BQk(),t.ynx(24,17),t.YNc(25,M,3,0,"th",16),t.YNc(26,F,2,1,"td",14),t.BQk(),t.ynx(27,18),t.YNc(28,I,3,0,"th",16),t.YNc(29,J,2,1,"td",14),t.BQk(),t.ynx(30,19),t.YNc(31,k,3,0,"th",16),t.YNc(32,w,2,1,"td",14),t.BQk(),t.ynx(33,20),t.YNc(34,S,3,0,"th",16),t.YNc(35,E,2,1,"td",14),t.BQk(),t.ynx(36,21),t.YNc(37,j,3,0,"th",16),t.YNc(38,B,2,1,"td",14),t.BQk(),t.ynx(39,22),t.YNc(40,$,3,0,"th",16),t.YNc(41,z,2,1,"td",14),t.BQk(),t.ynx(42,23),t.YNc(43,H,3,0,"th",24),t.YNc(44,X,8,0,"td",14),t.BQk(),t.YNc(45,R,1,0,"tr",25),t.YNc(46,V,1,0,"tr",26),t.qZA(),t.YNc(47,G,2,1,"div",27),t.qZA()()),2&n&&(t.xp6(10),t.Q6J("value",o.selectedValue),t.xp6(1),t.Q6J("ngForOf",o.types),t.xp6(3),t.hij("+\xa0",t.lcZ(15,7,"Create Coupon"),""),t.xp6(3),t.Q6J("dataSource",o.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",o.columnsToDisplay),t.xp6(1),t.Q6J("matRowDefColumns",o.columnsToDisplay),t.xp6(1),t.Q6J("ngIf",0===o.dataSource.data.length))},dependencies:[p.sg,p.O5,A.ey,g.KE,g.hX,U.Hw,b.Ou,y.gD,O.YE,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,N.gM,c.rH,a._Y,a.JL,p.gd],styles:[".section-b[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{padding:15px;border:none;border-radius:10px;background:#f3f3f9;width:100%;line-height:24px}.add-coupon[_ngcontent-%COMP%]{font-size:16px}.add-coupon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;color:#0E1F53;text-decoration:none}.card[_ngcontent-%COMP%]{background-color:#fff;height:90%;border-radius:10px;box-shadow:0 2px 5px #0000001a;padding:5px;text-align:center;margin:10px}.disFlex[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.disFlex[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative}.disFlex[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .normal-search[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{border:none;height:2.375rem;padding-left:2.5rem;padding-right:1.25rem;background-color:#f3f3f9;box-shadow:none;border-radius:1.875rem;outline:0}.disFlex[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .normal-search[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;font-size:1rem;line-height:2.375rem;left:.813rem;top:0;color:#74788d}.mat-table[_ngcontent-%COMP%]{width:100%}.displayicon[_ngcontent-%COMP%]{display:flex}"]});var K=i(5259);class W{}var tt=i(7009),et=i(4859),nt=i(4144);function ot(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("CreatedFor is required"))}function it(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Coupon Name is required"))}function at(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Description is required"))}function rt(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Discount is required"))}function lt(e,n){if(1&e&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(o)}}function ut(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Type is required"))}function pt(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Total Quantity is required"))}function st(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Created date is required"))}function mt(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Valid date is required"))}class s{constructor(n,o,l,u){this.api=n,this.fb=o,this.router=l,this.snackbar=u,this.types=["Affiliate","In Store"],this.submitted=!1}ngOnInit(){this.form=this.fb.group({createdFor:["",a.kI.required],couponName:["",a.kI.required],description:["",a.kI.required],discountPercentage:["",a.kI.required],totalQuantity:["",a.kI.required],createdDate:["",a.kI.required],validDateTill:["",a.kI.required]})}saveCoupons(){if(this.form.invalid)this.submitted=!0;else{this.submitted=!1;const n=new W;n._id=null,n.createdFor=this.form.get("createdFor").value,n.couponName=this.form.get("couponName").value,n.description=this.form.get("description").value,n.discountPercentage=this.form.get("discountPercentage").value,n.totalQuantity=this.form.get("totalQuantity").value,n.createdDate=this.form.get("createdDate").value,n.validDateTill=this.form.get("validDateTill").value,this.api.apiPostCall(n,"Coupon/createCoupon").subscribe(o=>{o.message.includes("Created Successfully")&&(this.snackbar.openFromComponent(K.h,{data:o.message}),this.router.navigate(["/coupon/list"]))},o=>{o&&this.form.reset()})}}}s.\u0275fac=function(n){return new(n||s)(t.Y36(v.s),t.Y36(a.qu),t.Y36(c.F0),t.Y36(tt.ux))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-coupons-add-edit"]],decls:87,vars:27,consts:[[1,"container"],[1,"card-title"],["routerLink","/coupon/list",1,"fa","fa-arrow-left",2,"font-size","20px","cursor","pointer"],[2,"padding","0px !important","margin","0px !important","font-weight","600"],[1,"card"],[3,"formGroup"],[1,"row"],[1,"section-b","col-md-12"],[1,"required"],["type","text","name","Search","matInput","","formControlName","createdFor","maxlength","50","required","",1,"input"],[1,"hintalign"],[4,"ngIf"],["type","text","name","Search","matInput","","formControlName","couponName","maxlength","50",1,"input"],["type","text","name","Search","matInput","","formControlName","description","maxlength","500",1,"input"],[1,"section-b","col"],["type","text","name","Search","matInput","","formControlName","discountPercentage","maxlength","50",1,"input"],["formControlName","type","multiple",""],[3,"value",4,"ngFor","ngForOf"],["type","text","name","Search","matInput","","formControlName","totalQuantity","maxlength","50",1,"input"],["for","date"],["type","date","id","createdDate","name","createdDate","matInput","","formControlName","createdDate",1,"input"],["type","date","id","validDateTill","name","validDateTill","matInput","","formControlName","validDateTill",1,"input"],[1,"disflex"],["mat-flat-button","","color","warn","type","reset"],["mat-flat-button","","color","primary","type","submit",3,"click"],[3,"value"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"i",2),t._uU(3,"\xa0\xa0 "),t.TgZ(4,"h2",3),t._uU(5),t.ALo(6,"uppercase"),t.ALo(7,"uppercase"),t.qZA()(),t.TgZ(8,"div",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-label"),t._uU(13,"Created For "),t.TgZ(14,"span",8),t._uU(15,"*"),t.qZA()(),t._UZ(16,"input",9),t.TgZ(17,"mat-hint",10),t._uU(18),t.qZA(),t.YNc(19,ot,2,1,"mat-error",11),t.qZA(),t.TgZ(20,"div",7)(21,"mat-label"),t._uU(22,"Coupon Name "),t.TgZ(23,"span",8),t._uU(24,"*"),t.qZA()(),t._UZ(25,"input",12),t.TgZ(26,"mat-hint",10),t._uU(27),t.qZA(),t.YNc(28,it,2,1,"mat-error",11),t.qZA(),t.TgZ(29,"div",7)(30,"mat-label"),t._uU(31,"Description "),t.TgZ(32,"span",8),t._uU(33,"*"),t.qZA()(),t._UZ(34,"input",13),t.TgZ(35,"mat-hint",10),t._uU(36),t.qZA(),t.YNc(37,at,2,1,"mat-error",11),t.qZA()(),t.TgZ(38,"div",6)(39,"div",14)(40,"mat-label"),t._uU(41,"Discount Percentage "),t.TgZ(42,"span",8),t._uU(43,"*"),t.qZA()(),t._UZ(44,"input",15),t.TgZ(45,"mat-hint",10),t._uU(46),t.qZA(),t.YNc(47,rt,2,1,"mat-error",11),t.qZA(),t.TgZ(48,"div",14)(49,"mat-label"),t._uU(50,"Type "),t.TgZ(51,"span",8),t._uU(52,"*"),t.qZA()(),t.TgZ(53,"mat-select",16),t.YNc(54,lt,2,2,"mat-option",17),t.qZA(),t.YNc(55,ut,2,1,"mat-error",11),t.qZA(),t.TgZ(56,"div",14)(57,"mat-label"),t._uU(58,"Total Quantity "),t.TgZ(59,"span",8),t._uU(60,"*"),t.qZA()(),t._UZ(61,"input",18),t.TgZ(62,"mat-hint",10),t._uU(63),t.qZA(),t.YNc(64,pt,2,1,"mat-error",11),t.qZA()(),t.TgZ(65,"div",6)(66,"div",14)(67,"mat-label",19),t._uU(68,"Created Date "),t.TgZ(69,"span",8),t._uU(70,"*"),t.qZA()(),t._UZ(71,"input",20),t.YNc(72,st,2,1,"mat-error",11),t.qZA(),t.TgZ(73,"div",14)(74,"mat-label",19),t._uU(75,"Valid Date "),t.TgZ(76,"span",8),t._uU(77,"*"),t.qZA()(),t._UZ(78,"input",21),t.YNc(79,mt,2,1,"mat-error",11),t.qZA()(),t.TgZ(80,"div",22)(81,"button",23),t._uU(82),t.ALo(83,"uppercase"),t.qZA(),t.TgZ(84,"button",24),t.NdJ("click",function(){return o.saveCoupons()}),t._uU(85),t.ALo(86,"uppercase"),t.qZA()()()()()),2&n){let l,u,C,_,h,Z,T,x;t.xp6(5),t.AsE("",t.lcZ(6,19,"Coupons")," - Add ",t.lcZ(7,21,"Coupon"),""),t.xp6(4),t.Q6J("formGroup",o.form),t.xp6(9),t.hij("",(null==o.form.get("createdFor").value?null:o.form.get("createdFor").value.length)||0,"/50 "),t.xp6(1),t.Q6J("ngIf",o.submitted&&(null==(l=o.form.get("createdFor"))||null==l.errors?null:l.errors.required)),t.xp6(8),t.hij("",(null==o.form.get("couponName").value?null:o.form.get("couponName").value.length)||0,"/50 "),t.xp6(1),t.Q6J("ngIf",o.submitted&&(null==(u=o.form.get("couponName"))||null==u.errors?null:u.errors.required)),t.xp6(8),t.hij("",(null==o.form.get("description").value?null:o.form.get("description").value.length)||0,"/500 "),t.xp6(1),t.Q6J("ngIf",o.submitted&&(null==(C=o.form.get("description"))||null==C.errors?null:C.errors.required)),t.xp6(9),t.hij("",(null==o.form.get("discountPercentage").value?null:o.form.get("discountPercentage").value.length)||0,"/50 "),t.xp6(1),t.Q6J("ngIf",o.submitted&&(null==(_=o.form.get("discountPercentage"))||null==_.errors?null:_.errors.required)),t.xp6(7),t.Q6J("ngForOf",o.types),t.xp6(1),t.Q6J("ngIf",o.submitted&&(null==(h=o.form.get("type"))||null==h.errors?null:h.errors.required)),t.xp6(8),t.hij("",(null==o.form.get("totalQuantity").value?null:o.form.get("totalQuantity").value.length)||0,"/50 "),t.xp6(1),t.Q6J("ngIf",o.submitted&&(null==(Z=o.form.get("totalQuantity"))||null==Z.errors?null:Z.errors.required)),t.xp6(8),t.Q6J("ngIf",o.submitted&&(null==(T=o.form.get("createdDate"))||null==T.errors?null:T.errors.required)),t.xp6(7),t.Q6J("ngIf",o.submitted&&(null==(x=o.form.get("validDateTill"))||null==x.errors?null:x.errors.required)),t.xp6(3),t.Oqu(t.lcZ(83,23,"Discard")),t.xp6(3),t.Oqu(t.lcZ(86,25,"Save"))}},dependencies:[p.sg,p.O5,A.ey,et.lW,g.hX,g.bx,g.TO,nt.Nt,y.gD,c.rH,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,p.gd],styles:[".card[_ngcontent-%COMP%]{background-color:#fff;height:90%;border-radius:10px;box-shadow:0 2px 5px #0000001a;padding:1rem}mat-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:red}.required-error[_ngcontent-%COMP%]{border-color:red!important}.hintalign[_ngcontent-%COMP%]{display:flex!important;justify-content:end!important}.section-b[_ngcontent-%COMP%]{margin:10px}.section-b[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{padding:10px;border:none;border-radius:10px;background:#f3f3f9;width:100%;line-height:20px;margin-top:10px;margin-bottom:10px}.section-b[_ngcontent-%COMP%]     .mat-mdc-select-trigger{border-radius:10px;background:#f3f3f9;line-height:17px;padding:8px}.section-b[_ngcontent-%COMP%]     .mat-mdc-select{margin:10px}.card-title[_ngcontent-%COMP%]{display:flex;align-items:center;margin:4px}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{position:absolute;right:20px!important;width:24px;height:24px;background:url(https://cdn4.iconfinder.com/data/icons/small-n-flat/24/calendar-512.png) center/cover no-repeat;opacity:.5;text-transform:uppercase;cursor:pointer}input[type=date][_ngcontent-%COMP%]::-webkit-datetime-edit{padding:0;margin:0;text-transform:uppercase}.disflex[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:10px}"]});var ct=i(8827);const dt=[{path:"",component:d,children:[{path:"list",component:f},{path:"add",component:s},{path:"edit/:id",component:s}]}];class m{}m.\u0275fac=function(n){return new(n||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[p.ez,ct.q,c.Bz.forChild(dt),a.UX]})}}]);