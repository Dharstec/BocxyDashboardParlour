"use strict";(self.webpackChunkecommerce_dashboard=self.webpackChunkecommerce_dashboard||[]).push([[150],{5150:(Yt,T,s)=>{s.r(T),s.d(T,{CouponsModule:()=>wt});var c=s(6895),m=s(8729),t=s(4650);let M=(()=>{var e;class o{}return(e=o).\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-coupons"]],decls:1,vars:0,template:function(i,n){1&i&&t._UZ(0,"router-outlet")},dependencies:[m.lC]}),o})();var p=s(671),w=s(7766),x=s(5259),v=s(574),f=s(5938),b=s(4859),_=s(9549),q=s(4144),u=s(4006);function k(e,o){if(1&e&&(t.TgZ(0,"th",12),t._uU(1),t.qZA()),2&e){const a=t.oxw().$implicit;t.xp6(1),t.Oqu(a)}}function L(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"td",13)(1,"mat-form-field",14)(2,"mat-label"),t._uU(3,"Custom Column Header"),t.qZA(),t.TgZ(4,"input",15),t.NdJ("ngModelChange",function(n){const r=t.CHM(a).index,d=t.oxw(2);return t.KtG(d.headerMap[r]=n)}),t.qZA()()()}if(2&e){const a=o.index,i=t.oxw(2);t.xp6(4),t.Q6J("ngModel",i.headerMap[a])}}function Y(e,o){1&e&&(t.ynx(0,9),t.YNc(1,k,2,1,"th",10),t.YNc(2,L,5,1,"td",11),t.BQk()),2&e&&t.Q6J("matColumnDef",o.$implicit)}function Q(e,o){1&e&&t._UZ(0,"tr",16)}function J(e,o){1&e&&t._UZ(0,"tr",17)}let P=(()=>{var e;class o{constructor(i,n){this.dialogRef=i,this.data=n,this.headerMap=new Array(this.data.headers.length)}onNoClick(){this.dialogRef.close()}}return(e=o).\u0275fac=function(i){return new(i||e)(t.Y36(f.so),t.Y36(f.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-excel-map"]],decls:12,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-table","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["appearance","fill"],["matInput","",3,"ngModel","ngModelChange"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t.TgZ(0,"h2",0),t._uU(1,"Export to Excel"),t.qZA(),t.TgZ(2,"div",1)(3,"table",2),t.YNc(4,Y,3,1,"ng-container",3),t.YNc(5,Q,1,0,"tr",4),t.YNc(6,J,1,0,"tr",5),t.qZA()(),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return n.onNoClick()}),t._uU(9,"Cancel"),t.qZA(),t.TgZ(10,"button",8),t._uU(11,"Export"),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("dataSource",n.data.dataSource),t.xp6(1),t.Q6J("ngForOf",n.data.headers),t.xp6(1),t.Q6J("matHeaderRowDef",n.data.headers),t.xp6(1),t.Q6J("matRowDefColumns",n.data.headers),t.xp6(4),t.Q6J("mat-dialog-close",n.headerMap))},dependencies:[b.lW,f.ZT,f.uh,f.xY,f.H8,_.KE,_.hX,q.Nt,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,u.Fj,u.JJ,u.On,c.sg]}),o})();var A=s(9625),y=s(7009),U=s(3238),I=s(7392),E=s(1572),O=s(4385),F=s(6308),S=s(266);function j(e,o){if(1&e&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.Q6J("value",a),t.xp6(1),t.Oqu(a)}}function H(e,o){if(1&e&&(t.TgZ(0,"mat-option",32),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.Q6J("value",a.value),t.xp6(1),t.Oqu(a.status)}}function R(e,o){1&e&&(t.TgZ(0,"th",33)(1,"span"),t._uU(2,"Name"),t.qZA()())}function $(e,o){if(1&e&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.couponName))}}function B(e,o){1&e&&(t.TgZ(0,"th",35)(1,"span"),t._uU(2,"coupon Name"),t.qZA()())}function G(e,o){if(1&e&&(t.TgZ(0,"td",34),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,a.couponName))}}function z(e,o){1&e&&(t.TgZ(0,"th",35)(1,"span"),t._uU(2,"%"),t.qZA()())}function V(e,o){if(1&e&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.discountPercentage)}}function X(e,o){1&e&&(t.TgZ(0,"th",35)(1,"span"),t._uU(2,"remaining"),t.qZA()())}function K(e,o){if(1&e&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.remaining)}}function W(e,o){1&e&&(t.TgZ(0,"th",35)(1,"span"),t._uU(2,"orders"),t.qZA()())}function tt(e,o){if(1&e&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.totalOrders)}}function et(e,o){1&e&&(t.TgZ(0,"th",35)(1,"span"),t._uU(2,"sales"),t.qZA()())}function nt(e,o){if(1&e&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.totalSales)}}function ot(e,o){1&e&&(t.TgZ(0,"th",35)(1,"span"),t._uU(2,"commission"),t.qZA()())}function it(e,o){if(1&e&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.totalCommissions)}}function at(e,o){1&e&&(t.TgZ(0,"th",35)(1,"span"),t._uU(2,"ending"),t.qZA()())}function rt(e,o){if(1&e&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.validDateTill)}}function lt(e,o){1&e&&(t.TgZ(0,"th",35)(1,"span"),t._uU(2,"Status"),t.qZA()())}function st(e,o){if(1&e&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.xp6(1),t.Oqu(a.couponStatus?"Active":"Inactive")}}function ut(e,o){1&e&&(t.TgZ(0,"th",36)(1,"span"),t._uU(2,"Action"),t.qZA()())}function pt(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"td",34)(1,"div",37)(2,"mat-icon",38),t.NdJ("click",function(){const l=t.CHM(a).$implicit,r=t.oxw();return t.KtG(r.edit("edit",l._id))}),t._uU(3,"edit"),t.qZA(),t.TgZ(4,"mat-icon",39),t.NdJ("click",function(){const l=t.CHM(a).$implicit,r=t.oxw();return t.KtG(r.delete(l._id))}),t._uU(5,"delete"),t.qZA(),t.TgZ(6,"mat-icon",40),t.NdJ("click",function(){const l=t.CHM(a).$implicit,r=t.oxw();return t.KtG(r.edit("view",l._id))}),t._uU(7,"visibility"),t.qZA()()()}}function ct(e,o){1&e&&t._UZ(0,"tr",41)}function dt(e,o){1&e&&t._UZ(0,"tr",42)}function mt(e,o){1&e&&(t.TgZ(0,"div",43),t._UZ(1,"mat-spinner",44),t.qZA()),2&e&&(t.xp6(1),t.Q6J("diameter",50))}function ft(e,o){1&e&&(t.TgZ(0,"div",45)(1,"p"),t._uU(2),t.qZA()()),2&e&&(t.xp6(2),t.Oqu("No data available"))}let _t=(()=>{var e;class o{constructor(i,n,l,r){this.api=i,this.dialog=n,this.snackbar=l,this.router=r,this.dataSource=new p.by([]),this.columnsToDisplay=["name","coupon","percentage","remaining","orders","sales","commission","ending","status","action"],this.types=["Affiliate","In Store"],this.status=[{status:"Active",value:!0},{status:"Inactive",value:!1}],this.noData=!1}ngOnInit(){this.getCouponsList()}getCouponsList(){this.api.apiGetCall("Coupon/getCoupon").subscribe(i=>{this.couponsListData=i.data,this.dataSource.data=i.data.sort((n,l)=>Date.parse(l.createdAt)-Date.parse(n.createdAt)),i.data?.length||(this.noData=!0)})}openExportDialog(){this.dialog.open(P,{width:"500px",data:{headers:Object.keys(this.dataSource.data[0]),dataSource:this.dataSource.data}}).afterClosed().subscribe(n=>{n&&this.generateExcel(n)})}generateExcel(i){const n=this.dataSource.data.map(N=>{const D={};return i.forEach((kt,Lt)=>{D[kt]=N[Object.keys(N)[Lt]]}),D}),r={Sheets:{data:v.P6.json_to_sheet(n)},SheetNames:["data"]},d=v.cW(r,{bookType:"xlsx",type:"array"}),g=new Blob([d],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),C=URL.createObjectURL(g),h=document.createElement("a");h.href=C,h.download="data.xlsx",h.click()}applyFilter(i){this.dataSource.filter=i.trim().toLowerCase()}delete(i){this.dialog.open(w.$,{width:"250px",data:{from:"delete"}}).afterClosed().subscribe(l=>{l&&this.api.apiDeleteCall(i,"Coupon/deleteCoupon").subscribe(r=>{r.message.includes("Successfully")&&(this.snackbar.openFromComponent(x.h,{data:r.message}),this.getCouponsList())})})}edit(i,n){this.router.navigate(["/coupon/"+i,n])}applyTypeFilter(){this.selectedStatus?.length||this.selectedValue?.length?this.filteredData=this.dataSource.data.filter(i=>!(this.selectedValue?.length&&!this.selectedValue?.includes(i.type[0])||this.selectedStatus?.length&&!this.selectedStatus?.includes(i.couponStatus[0]))):(this.filteredData=[],this.dataSource.data=this.couponsListData)}}return(e=o).\u0275fac=function(i){return new(i||e)(t.Y36(A.s),t.Y36(f.uw),t.Y36(y.ux),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-coupons-list"]],decls:58,vars:12,consts:[[1,"container"],[1,"card"],[1,"row",2,"display","flex","flex-direction","row","align-items","center"],[1,"section-b","col-md-3"],["type","text","name","Search","placeholder","Search...",1,"input","m-3",3,"keyup"],[1,"col-md-6",2,"display","flex","justify-content","flex-start","gap","10px"],[2,"display","flex","gap","15px"],["appearance","outline"],["multiple","",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"add-coupon","col-md-3"],["routerLink","/coupon/add"],[1,"table-container"],["mat-table","","matSort","",1,"table",3,"dataSource"],["matColumnDef","name"],["class","first","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","coupon"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","percentage"],["matColumnDef","remaining"],["matColumnDef","orders"],["matColumnDef","sales"],["matColumnDef","commission"],["matColumnDef","ending"],["matColumnDef","status"],["matColumnDef","action"],["class","last","mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","spinner-container",4,"ngIf"],["class","no_data",4,"ngIf"],[3,"value"],["mat-header-cell","",1,"first"],["mat-cell",""],["mat-header-cell",""],["mat-header-cell","",1,"last"],[1,"displayicon"],["matTooltip","Edit",2,"font-size","18px","cursor","pointer",3,"click"],["matTooltip","Delete",2,"font-size","18px","cursor","pointer",3,"click"],["matTooltip","View",2,"font-size","18px","cursor","pointer",3,"click"],["mat-header-row",""],["mat-row",""],[1,"spinner-container"],[3,"diameter"],[1,"no_data"]],template:function(i,n){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),t.NdJ("keyup",function(r){return n.applyFilter(r.target.value)}),t.qZA()(),t.TgZ(5,"div",5)(6,"form",6)(7,"mat-form-field",7)(8,"mat-label"),t._uU(9,"Type"),t.qZA(),t.TgZ(10,"mat-select",8),t.NdJ("valueChange",function(r){return n.selectedValue=r})("selectionChange",function(){return n.applyTypeFilter()}),t.YNc(11,j,2,2,"mat-option",9),t.qZA()(),t.TgZ(12,"mat-form-field",7)(13,"mat-label"),t._uU(14,"Status"),t.qZA(),t.TgZ(15,"mat-select",8),t.NdJ("valueChange",function(r){return n.selectedStatus=r})("selectionChange",function(){return n.applyTypeFilter()}),t.YNc(16,H,2,2,"mat-option",9),t.qZA()()()(),t.TgZ(17,"div",10)(18,"a",11),t._uU(19),t.ALo(20,"uppercase"),t.qZA()()()(),t.TgZ(21,"div",1)(22,"div",12)(23,"table",13),t.ynx(24,14),t.YNc(25,R,3,0,"th",15),t.YNc(26,$,3,3,"td",16),t.BQk(),t.ynx(27,17),t.YNc(28,B,3,0,"th",18),t.YNc(29,G,3,3,"td",16),t.BQk(),t.ynx(30,19),t.YNc(31,z,3,0,"th",18),t.YNc(32,V,2,1,"td",16),t.BQk(),t.ynx(33,20),t.YNc(34,X,3,0,"th",18),t.YNc(35,K,2,1,"td",16),t.BQk(),t.ynx(36,21),t.YNc(37,W,3,0,"th",18),t.YNc(38,tt,2,1,"td",16),t.BQk(),t.ynx(39,22),t.YNc(40,et,3,0,"th",18),t.YNc(41,nt,2,1,"td",16),t.BQk(),t.ynx(42,23),t.YNc(43,ot,3,0,"th",18),t.YNc(44,it,2,1,"td",16),t.BQk(),t.ynx(45,24),t.YNc(46,at,3,0,"th",18),t.YNc(47,rt,2,1,"td",16),t.BQk(),t.ynx(48,25),t.YNc(49,lt,3,0,"th",18),t.YNc(50,st,2,1,"td",16),t.BQk(),t.ynx(51,26),t.YNc(52,ut,3,0,"th",27),t.YNc(53,pt,8,0,"td",16),t.BQk(),t.YNc(54,ct,1,0,"tr",28),t.YNc(55,dt,1,0,"tr",29),t.qZA(),t.YNc(56,mt,2,1,"div",30),t.YNc(57,ft,3,1,"div",31),t.qZA()()()),2&i&&(t.xp6(10),t.Q6J("value",n.selectedValue),t.xp6(1),t.Q6J("ngForOf",n.types),t.xp6(4),t.Q6J("value",n.selectedStatus),t.xp6(1),t.Q6J("ngForOf",n.status),t.xp6(3),t.hij("+\xa0",t.lcZ(20,10,"Create Coupon"),""),t.xp6(4),t.Q6J("dataSource",null!=n.filteredData&&n.filteredData.length?n.filteredData:n.dataSource),t.xp6(31),t.Q6J("matHeaderRowDef",n.columnsToDisplay),t.xp6(1),t.Q6J("matRowDefColumns",n.columnsToDisplay),t.xp6(1),t.Q6J("ngIf",(0===n.dataSource.data.length||0===(null==n.filteredData?null:n.filteredData.length))&&!n.noData),t.xp6(1),t.Q6J("ngIf",(0===n.dataSource.data.length||0===(null==n.filteredData?null:n.filteredData.length))&&n.noData))},dependencies:[c.sg,c.O5,U.ey,_.KE,_.hX,I.Hw,E.Ou,O.gD,F.YE,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,S.gM,m.rH,u._Y,u.JL,c.gd,c.rS],styles:[".section-b[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{padding:15px;border:none;border-radius:10px;background:#f3f3f9;width:100%;line-height:24px}.add-coupon[_ngcontent-%COMP%]{font-size:16px}.add-coupon[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:500;color:#0e1f53;text-decoration:none}.card[_ngcontent-%COMP%]{background-color:#fff;height:90%;border-radius:10px;box-shadow:0 2px 5px #0000001a;padding:5px;text-align:center;margin:10px}.no_data[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin:12px 0 0 12px}.disFlex[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.disFlex[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]{position:relative}.disFlex[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .normal-search[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{border:none;height:2.375rem;padding-left:2.5rem;padding-right:1.25rem;background-color:#f3f3f9;box-shadow:none;border-radius:1.875rem;outline:0}.disFlex[_ngcontent-%COMP%]   .search-container[_ngcontent-%COMP%]   .normal-search[_ngcontent-%COMP%]   .search-icon[_ngcontent-%COMP%]{position:absolute;font-size:1rem;line-height:2.375rem;left:.813rem;top:0;color:#74788d}.mat-table[_ngcontent-%COMP%]{width:100%}.displayicon[_ngcontent-%COMP%]{display:flex}.table-container[_ngcontent-%COMP%]{max-width:100%;overflow-x:auto}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}[_ngcontent-%COMP%]::-webkit-scrollbar{width:20px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{box-shadow:inset 0 0 5px gray;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#0E1F53;border-radius:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#3e4c75}"]}),o})();class gt{}function ht(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("CreatedFor is required"))}function Ct(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Coupon Name is required"))}function xt(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Description is required"))}function Zt(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Discount is required"))}function Tt(e,o){if(1&e&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&e){const a=o.$implicit;t.Q6J("value",a),t.xp6(1),t.Oqu(a)}}function vt(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.hij("","Type is required"," "))}function bt(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Total Quantity is required"))}function qt(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Limit is required"))}function At(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e&&(t.xp6(1),t.Oqu("Valid date is required"))}function yt(e,o){if(1&e&&(t.TgZ(0,"div",6)(1,"div",14)(2,"mat-label"),t._uU(3,"Limit "),t.TgZ(4,"span",8),t._uU(5,"*"),t.qZA()(),t._UZ(6,"input",22),t.TgZ(7,"mat-hint",10),t._uU(8),t.qZA(),t.YNc(9,qt,2,1,"mat-error",11),t.qZA(),t.TgZ(10,"div",14)(11,"mat-label",23),t._uU(12,"Valid Date "),t.TgZ(13,"span",8),t._uU(14,"*"),t.qZA()(),t._UZ(15,"input",24),t.YNc(16,At,2,1,"mat-error",11),t.qZA()()),2&e){const a=t.oxw();let i,n;t.xp6(8),t.hij("",(null==a.form.get("limit").value?null:a.form.get("limit").value.length)||0,"/50 "),t.xp6(1),t.Q6J("ngIf",a.submitted&&(null==(i=a.form.get("limit"))||null==i.errors?null:i.errors.required)),t.xp6(7),t.Q6J("ngIf",a.submitted&&(null==(n=a.form.get("validDateTill"))||null==n.errors?null:n.errors.required))}}function Ut(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(a);const n=t.oxw(2);return t.KtG(n.saveCoupons())}),t._uU(1),t.ALo(2,"uppercase"),t.qZA()}2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Save")))}function Ot(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(a);const n=t.oxw(2);return t.KtG(n.saveCoupons())}),t._uU(1),t.ALo(2,"uppercase"),t.qZA()}2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"Update")))}function Nt(e,o){if(1&e){const a=t.EpF();t.TgZ(0,"div",25)(1,"button",26),t.NdJ("click",function(){t.CHM(a);const n=t.oxw();return t.KtG(n.discard())}),t._uU(2),t.ALo(3,"uppercase"),t.qZA(),t.YNc(4,Ut,3,3,"button",27),t.YNc(5,Ot,3,3,"button",27),t.qZA()}if(2&e){const a=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"Discard")),t.xp6(2),t.Q6J("ngIf",!a.edit),t.xp6(1),t.Q6J("ngIf",a.edit)}}let Z=(()=>{var e;class o{constructor(i,n,l,r,d){this.api=i,this.fb=n,this.router=l,this.snackbar=r,this.activeRoute=d,this.types=["Affiliate","In Store"],this.submitted=!1,this.edit=!1,this.view=!1,this.activeRoute.paramMap.subscribe(g=>{this.couponId=g.get("id"),this.couponId&&this.router.url.includes("edit")?(this.edit=!0,this.getCouponDetails()):this.router.url.includes("view")&&(this.view=!0,this.getCouponDetails())})}getCouponDetails(){this.api.apiGetDetailsCall(this.couponId,"Coupon/findCoupon").subscribe(i=>{this.couponsDetails=i.data,this.form.patchValue(i.data),this.router.url.includes("view")&&this.form.disable()})}ngOnInit(){this.form=this.fb.group({createdFor:["",u.kI.required],couponName:["",u.kI.required],description:["",u.kI.required],discountPercentage:["",u.kI.required],type:["",u.kI.required],totalQuantity:["",u.kI.required],limit:["",u.kI.required],validDateTill:["",u.kI.required]})}discard(){this.couponId?this.form.patchValue(this.couponsDetails):this.form.reset(),this.router.navigate(["/coupon/list"])}saveCoupons(){if(this.form.invalid)this.submitted=!0;else{this.submitted=!1;const i=new gt;i._id=this.couponId?this.couponId:null,i.createdFor=this.form.get("createdFor").value,i.couponName=this.form.get("couponName").value,i.description=this.form.get("description").value,i.type=this.form.get("type").value,i.discountPercentage=this.form.get("discountPercentage").value,i.totalQuantity=this.form.get("totalQuantity").value,i.limit=this.form.get("limit").value,i.validDateTill=this.form.get("validDateTill").value,this.couponId?this.api.apiPutCall(i,"Coupon/updateCoupon").subscribe(n=>{n.message.includes("Successfully")&&(this.snackbar.openFromComponent(x.h,{data:n.message}),this.router.navigate(["/coupon/list"]))},n=>{n&&this.form.reset()}):this.api.apiPostCall(i,"Coupon/createCoupon").subscribe(n=>{n.message.includes("Created Successfully")&&(this.snackbar.openFromComponent(x.h,{data:n.message}),this.router.navigate(["/coupon/list"]))},n=>{n&&this.form.reset()})}}}return(e=o).\u0275fac=function(i){return new(i||e)(t.Y36(A.s),t.Y36(u.qu),t.Y36(m.F0),t.Y36(y.ux),t.Y36(m.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-coupons-add-edit"]],decls:67,vars:21,consts:[[1,"container"],[1,"card-title"],["routerLink","/coupon/list",1,"fa","fa-arrow-left",2,"font-size","20px","cursor","pointer"],[2,"padding","0px !important","margin","0px !important","font-weight","600"],[1,"card"],[3,"formGroup"],[1,"row"],[1,"section-b","col-md-12"],[1,"required"],["type","text","name","Search","matInput","","formControlName","createdFor","maxlength","50","required","",1,"input"],[1,"hintalign"],[4,"ngIf"],["type","text","name","Search","matInput","","formControlName","couponName","maxlength","50",1,"input"],["type","text","name","Search","matInput","","formControlName","description","maxlength","500",1,"input"],[1,"section-b","col"],["type","text","oninput","this.value=this.value.replace(/[^0-9]/g,'');","name","Search","matInput","","formControlName","discountPercentage","maxlength","50",1,"input"],["formControlName","type","multiple",""],[3,"value",4,"ngFor","ngForOf"],["oninput","this.value=this.value.replace(/[^0-9]/g,'');","type","text","name","Search","matInput","","formControlName","totalQuantity","maxlength","50",1,"input"],["class","row",4,"ngIf"],["class","disflex",4,"ngIf"],[3,"value"],["oninput","this.value=this.value.replace(/[^0-9]/g,'');","type","text","name","Search","matInput","","formControlName","limit","maxlength","50",1,"input"],["for","date"],["type","date","id","validDateTill","name","validDateTill","matInput","","formControlName","validDateTill",1,"input"],[1,"disflex"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary","type","submit",3,"click",4,"ngIf"],["mat-flat-button","","color","primary","type","submit",3,"click"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"i",2),t._uU(3,"\xa0\xa0 "),t.TgZ(4,"h2",3),t._uU(5),t.ALo(6,"uppercase"),t.ALo(7,"uppercase"),t.qZA()(),t.TgZ(8,"div",4)(9,"form",5)(10,"div",6)(11,"div",7)(12,"mat-label"),t._uU(13,"Created For "),t.TgZ(14,"span",8),t._uU(15,"*"),t.qZA()(),t._UZ(16,"input",9),t.TgZ(17,"mat-hint",10),t._uU(18),t.qZA(),t.YNc(19,ht,2,1,"mat-error",11),t.qZA(),t.TgZ(20,"div",7)(21,"mat-label"),t._uU(22,"Coupon Name "),t.TgZ(23,"span",8),t._uU(24,"*"),t.qZA()(),t._UZ(25,"input",12),t.TgZ(26,"mat-hint",10),t._uU(27),t.qZA(),t.YNc(28,Ct,2,1,"mat-error",11),t.qZA(),t.TgZ(29,"div",7)(30,"mat-label"),t._uU(31,"Description "),t.TgZ(32,"span",8),t._uU(33,"*"),t.qZA()(),t._UZ(34,"input",13),t.TgZ(35,"mat-hint",10),t._uU(36),t.qZA(),t.YNc(37,xt,2,1,"mat-error",11),t.qZA()(),t.TgZ(38,"div",6)(39,"div",14)(40,"mat-label"),t._uU(41,"Discount Percentage "),t.TgZ(42,"span",8),t._uU(43,"*"),t.qZA()(),t._UZ(44,"input",15),t.TgZ(45,"mat-hint",10),t._uU(46),t.qZA(),t.YNc(47,Zt,2,1,"mat-error",11),t.qZA(),t.TgZ(48,"div",14)(49,"mat-label"),t._uU(50,"Type "),t.TgZ(51,"span",8),t._uU(52,"*"),t.qZA()(),t.TgZ(53,"mat-select",16),t.YNc(54,Tt,2,2,"mat-option",17),t.qZA(),t.YNc(55,vt,2,1,"mat-error",11),t.qZA(),t.TgZ(56,"div",14)(57,"mat-label"),t._uU(58,"Total Quantity "),t.TgZ(59,"span",8),t._uU(60,"*"),t.qZA()(),t._UZ(61,"input",18),t.TgZ(62,"mat-hint",10),t._uU(63),t.qZA(),t.YNc(64,bt,2,1,"mat-error",11),t.qZA()(),t.YNc(65,yt,17,3,"div",19),t.YNc(66,Nt,6,5,"div",20),t.qZA()()()),2&i){let l,r,d,g,C,h;t.xp6(5),t.AsE("",t.lcZ(6,17,"Coupons")," - Add ",t.lcZ(7,19,"Coupon"),""),t.xp6(4),t.Q6J("formGroup",n.form),t.xp6(9),t.hij("",(null==n.form.get("createdFor").value?null:n.form.get("createdFor").value.length)||0,"/50 "),t.xp6(1),t.Q6J("ngIf",n.submitted&&(null==(l=n.form.get("createdFor"))||null==l.errors?null:l.errors.required)),t.xp6(8),t.hij("",(null==n.form.get("couponName").value?null:n.form.get("couponName").value.length)||0,"/50 "),t.xp6(1),t.Q6J("ngIf",n.submitted&&(null==(r=n.form.get("couponName"))||null==r.errors?null:r.errors.required)),t.xp6(8),t.hij("",(null==n.form.get("description").value?null:n.form.get("description").value.length)||0,"/500 "),t.xp6(1),t.Q6J("ngIf",n.submitted&&(null==(d=n.form.get("description"))||null==d.errors?null:d.errors.required)),t.xp6(9),t.hij("",(null==n.form.get("discountPercentage").value?null:n.form.get("discountPercentage").value.length)||0,"/50 "),t.xp6(1),t.Q6J("ngIf",n.submitted&&(null==(g=n.form.get("discountPercentage"))||null==g.errors?null:g.errors.required)),t.xp6(7),t.Q6J("ngForOf",n.types),t.xp6(1),t.Q6J("ngIf",n.submitted&&(null==(C=n.form.get("type"))||null==C.errors?null:C.errors.required)),t.xp6(8),t.hij("",(null==n.form.get("totalQuantity").value?null:n.form.get("totalQuantity").value.length)||0,"/50 "),t.xp6(1),t.Q6J("ngIf",n.submitted&&(null==(h=n.form.get("totalQuantity"))||null==h.errors?null:h.errors.required)),t.xp6(1),t.Q6J("ngIf",!n.edit&&!n.view),t.xp6(1),t.Q6J("ngIf",!n.view)}},dependencies:[c.sg,c.O5,U.ey,b.lW,_.hX,_.bx,_.TO,q.Nt,O.gD,m.rH,u._Y,u.Fj,u.JJ,u.JL,u.Q7,u.nD,u.sg,u.u,c.gd],styles:[".card[_ngcontent-%COMP%]{background-color:#fff;height:90%;border-radius:10px;box-shadow:0 2px 5px #0000001a;padding:1rem}mat-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:red}.required-error[_ngcontent-%COMP%]{border-color:red!important}.hintalign[_ngcontent-%COMP%]{display:flex!important;justify-content:end!important}.section-b[_ngcontent-%COMP%]{margin:10px}.section-b[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{padding:10px;border:none;border-radius:10px;background:#f3f3f9;width:100%;line-height:20px;margin-top:10px;margin-bottom:10px}.section-b[_ngcontent-%COMP%]     .mat-mdc-select-trigger{border-radius:10px;background:#f3f3f9;line-height:17px;padding:8px}.section-b[_ngcontent-%COMP%]     .mat-mdc-select{margin:10px}.card-title[_ngcontent-%COMP%]{display:flex;align-items:center;margin:4px}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{position:absolute;right:20px!important;width:24px;height:24px;background:url(https://cdn4.iconfinder.com/data/icons/small-n-flat/24/calendar-512.png) center/cover no-repeat;opacity:.5;text-transform:uppercase;cursor:pointer}input[type=date][_ngcontent-%COMP%]::-webkit-datetime-edit{padding:0;margin:0;text-transform:uppercase}.disflex[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:10px}"]}),o})();var Dt=s(7605);const Mt=[{path:"",component:M,children:[{path:"list",component:_t},{path:"add",component:Z},{path:"edit/:id",component:Z},{path:"view/:id",component:Z}]}];let wt=(()=>{var e;class o{}return(e=o).\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,Dt.q,m.Bz.forChild(Mt),u.UX]}),o})()}}]);